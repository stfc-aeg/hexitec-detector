<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Hexitec Server</title>

    <script src="js/jquery-2.2.3.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap-3.3.6-dist/dist/js/bootstrap.min.js"></script>
    <script src="js/odin_server.js"></script>
    <link href="css/odin-server.css" rel="stylesheet">

    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->
    <link href="js/bootstrap-3.3.6-dist/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="js/bootstrap-3.3.6-dist/dist/css/bootstrap-switch.min.css" rel="stylesheet">   <!-- Comment out & load JSON will change checkboxes as they should -->
    <link href="js/bootstrap-slider-10.2.1/css/bootstrap-slider.css" rel="stylesheet">
    <!-- <link href="js/bootstrap-slider-10.2.1/css/bootstrap-slider.min.css" rel="stylesheet"> -->

    <!-- Turn radiobuttons into switches?-->
    <script src="js/bootstrap-switch/highlight.js"></script>
    <script src="js/bootstrap-switch/bootstrap-switch.js"></script>
    <script src="js/bootstrap-switch/main.js"></script>    <!-- Comment out and CS checkbox will be bootstrapified (but click becomes unreliable..) -->

  </head>
  <body>
      <form name="myForm">
          <input type="radio" name="myRadios"  value="1" />
          <input type="radio" name="myRadios"  value="2" />
      </form>
      Test put: <input type="checkbox" name="test_put" data-size="small">
      Test get: <input type="checkbox" name="test_get" data-size="small">

      <script>
          var rad = document.myForm.myRadios;
          var prev = null;
          for(var i = 0; i < rad.length; i++) {
              rad[i].addEventListener('change', function() {
                  (prev)? console.log(prev.value):null;
                  if(this !== prev) {
                      prev = this;
                  }
                  console.log(this.value)
              });
          }
      </script>

    <div class="container">

      <div class="odin-server">
        <h1>Hexitec Control</h1>
<!--        <p class="lead">Welcome to the Hexitec Odin Control!</p> -->
        <p>API version is:&nbsp;<span id="api-version">&nbsp;</span>
          &nbsp;Registered API adapters:&nbsp;<span id="api-adapters">&nbsp;</span></p>
        <p>Hexitec background task count:&nbsp;<span id="task-count">&nbsp;</span></p>
        <p>Enable background task:&nbsp;<input type="checkbox" id="task-enable" onclick="change_enable()"/>
        &nbsp;<input type="button" id="test-button" onclick="test_button()" value="flip checkbox"/></p> <!-- Works fine -->
        
      </div>

    </div><!-- /.container -->

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">ODIN</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    
    <table class="overall-table" align="center">
      <thead></thead>
      <tbody>
        <tr>  <!-- Third Row -->
          <td>
            R3 A progress bar:
          </td>
          <td>
            <div id="progress-bar" class="all-rounded">
              <div id="progress-bar-percentage" class="all-rounded" style="width: 38%"><span>68/100</span></div>
            </div>
          </td>
        </tr>

        <tr>  <!-- Fourth Row -->
          <td>
            R4 Connect to Detector:
          </td>
          <td>
            <div id="connect-checkbox" class="all-rounded">
              <input type="checkbox" id="connect-detector" onclick="connect_detector()"/>
            </div>
          </td>
        </tr>

        <tr>  <!-- Fifth Row -->
          <td>
            R5 A sample text field:
          </td>
          <td>
            <div class="text-sample">
              <input type="text" id="filename-text" value="/path/to/file.txt">
            </div>
          </td>
          <td>
            <div class="text-sample">
              <input type="button" id="filename-button" onclick="filename_button()" value="wat butt?"/> <!-- Get this to work? -->
            </div>
          </td>
        </tr>

        <tr>  <!-- Row 6 -->
          <td>
            R6 A target text field:
          </td>
          <td>
            <div id="text-target">
              Target text:&nbsp;<input type="text" id="target-name"/>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
<!-- ---->

    <div class="well sidebar-nav-fixed">
      <table class="overall-table" align="center">
        <thead></thead>
        <tbody>
          <tr>
            <td>
              <div class="button-sample">
                <input type="button" id="defaults-button" onclick="defaults_button()" value="Load Settings"/>
              </div>
  
            </td>
          </tr>

          <tr>  
            <td>  
              <th>Reorder&nbsp;</th>
            </td>
            <td>
              <div class="row sidebar-row vertical-align">
                <div class="col-xs-7">
                  <input type="checkbox" id='reorderButton' name="reorder_enable" data-size="small">
                  <!-- <p>Enable background task:&nbsp;<input type="checkbox" id="task-enable" onclick="change_enable()"/> -->

                </div>
              </div>
            </td>
          </tr>

          <tr>  
            <td>  
              Rows:&nbsp;
            </td>
            <td>
              <div class="text-rows">
                <input type="text" id="rows-text" onChange='reorder_rows_changed()' value="80">
              </div>
            </td>
            <td>
              &nbsp;Columns:&nbsp;
            </td>
            <td>
              <div class="text-columns">
                <input type="text" id="columns-text" onChange='reorder_columns_changed()' value="80">
              </div>
            </td>
          </tr>

          <tr>  
            <td>
              <th>Threshold&nbsp;</th>
            </td>
            <td>
              <div class="row sidebar-row vertical-align">
                <div class="col-xs-7">
                  <input type="checkbox" name="threshold_enable" data-size="small">
                </div>
              </div>
            </td>
          </tr>

          <tr>  
            <td>  
              Filename:&nbsp;
            </td>
            <td>
              <div class="text-characters">
                <input type="text" id="threshold-filename" onChange='threshold_filename_changed()' value="/path/to/thresholds.txt">
              </div>
            </td>
          </tr>
          <tr>
            <td>  
              Value:&nbsp;
            </td>
            <td>  
              <div class="text-integer">
                <input type="text" id="threshold-value" onChange='threshold_value_changed()' value="100">
              </div>
            </td>
          </tr>
          <tr>
              <td>
                Mode:&nbsp;
              </td>
              <td>
                <div class="text-characters">
                  <!-- <input type="text" id="threshold-mode" onChange='threshold_mode_changed()' value="None"> -->

                  <input type="text" id="threshold-mode" onchange='threshold_mode_changed(this)' placeholder="Threshold Mode" value="None" required/>
                </div>
              </td>
              <td></td> <!-- Leave column blank-->
              <td>
                &nbsp;<span id="threshold-mode-warning">&nbsp;</span>
              </td>
            </tr>
  
            <tr>  
              <td>  

              </td>
              <td> 
                <div class="row sidebar-row vertical-align">
                  <div class="col-xs-7">

                  </div>
                </div>
              </td>
            </tr>
  
            <tr>  
              <td>
              </td>
              <td> 
                <div class="row sidebar-row vertical-align">
                  <div class="col-xs-7">

                  </div>
                </div>
              </td>
            </tr>
    
            <tr>
              <td>  
                
              </td>
              <td> 
                <div class="row sidebar-row vertical-align">
                  <div class="col-xs-7">

                  </div>
                </div>
              </td>
            </tr>

          <tr>  
            <td>  
              <th>Next Frame&nbsp;</th>
            </td>
            <td>
              <div class="row sidebar-row vertical-align">
                <div class="col-xs-7">
                  <input type="checkbox" name="next_frame_enable" data-size="small">
                </div>
              </div>
            </td>
          </tr>

          <tr>
            <td>  
              <th>Calibration&nbsp;</th>
            </td>
            <td>
              <div class="row sidebar-row vertical-align">
                <div class="col-xs-7">
                  <input type="checkbox" name="calibration_enable" data-size="small">
                </div>
              </div>
            </td>
          </tr>

          <tr>
            <td>  
              Gradients:&nbsp;
            </td>
            <td>
              <div class="text-characters">
                <input type="text" id="gradients-filename" onChange='gradients_filename_changed()' value="/path/to/gradients.txt">
              </div>
            </td>
          </tr>
          <tr>
            <td>  
              Intercepts:&nbsp;
            </td>
            <td>
              <div class="text-characters">
                <input type="text" id="intercepts-filename" onChange='intercepts_filename_changed()' value="/path/to/intercepts.txt">
              </div>
            </td>
          </tr>

          <tr>
            <td>
              <th>CS: None / Add / Dis:&nbsp;</th>
            </td>
            <td></td>  <!-- Add empty cell or set of three radio buttons will upset Page layout -->
            <td>
              <form id="myForm">
                <input type="radio" id="noneButton" name="radio1" class="switch-radio1" value="none">
                <input type="radio" id="addButton" name="radio1" class="switch-radio1" value="add">
                <input type="radio" id="disButton" name="radio1" class="switch-radio1" value="dis">
              </form>
            </td>
          </tr>
          <tr>
            <div class="container">
              <div class="row">
                <div class="col-sm-6">
                    <h3 class="h5">A demo of radio buttons as switch</h3>
                    <input type="radio" name="radio1" checked data-on-color="success" data-off-color="warning" class="switch-radio1">
                    <input type="radio" name="radio1" data-on-color="success" data-off-color="warning" class="switch-radio1">
                    <input type="radio" name="radio1" data-on-color="success" data-off-color="primary"  class="switch-radio1">
                </div>
              </div>
            </div>
          </tr>
          <tr>
            <td>
              Pixel Grid Size:&nbsp;
            </td>
            <td>
              <div class="text-columns">
                <input type="text" id="pixel-grid-size-text" onChange='pixel_grid_size_changed()' value="3">
              </div>
            </td>
          </tr>

          <tr>  
            <td>  
              <th>Histogram&nbsp;</th>
            </td>
            <td>
              <div class="row sidebar-row vertical-align">
                <div class="col-xs-7">
                  <input type="checkbox" name="histogram_enable" data-size="small">
                </div>
              </div>
            </td>
          </tr>

          <tr>  
            <td>  
              Max Frames Received:&nbsp;
            </td>
            <td>
              <div class="text-rows">
                <input type="text" id="max-frames-received-text" onChange='max_frames_received_changed()' value="540">
              </div>
            </td>
          <tr>
            <td>
              Bin Start:&nbsp;
            </td>
            <td>
              <div class="text-columns">
                <input type="text" id="bin-start-text" onChange='bin_start_changed()' value="0">
              </div>
            </td>
          </tr>
          <tr>
            <td>
              Bin End:&nbsp;
            </td>
            <td>
              <div class="text-columns">
                <input type="text" id="bin-end-text" onChange='bin_end_changed()' value="8000">
              </div>
            </td>
          </tr>
          <tr>
            <td> 
              Bin Width:&nbsp;
            </td>
            <td> 
              <div class="text-columns">
                <input type="text" id="bin-width-text" onChange='bin_width_changed()' value="10.0">
              </div>
            </td>
          </tr>

      </tbody>
    </table>

  </div> <!-- well sidebar-nav-fixed -->


<!-- Section nicked from LiveView UI.. -->
      <div class="container-fluid">
            <div class="row fluid-row">

                <div class="span3">
                    <div class="well sidebar-nav-fixed">
                        <div class="container-fluid">
                            <div class="row sidebar-title">
                                <h3>Live View Demo</h3>
                            </div>
                            <div class="row sidebar-row vertical-align">
                                <div class="col-xs-5">
                                    <b>Auto&#8209;update:</b> 
                                </div>
                                <div class="col-xs-7">
                                    <input type="checkbox" name="liveview_enable" data-size="small">
                                </div>
                            </div>
                            <div class="row sidebar-row vertical-align">
                                <div class="col-xs-5">
                                    <b>Colour&nbsp;map:</b> 
                                </div>
                                <div class="col-xs-7">
                                    <select class="form-control" id="colormap_select">
                                    </select>
                                </div>
                            </div>
                            <div class="row sidebar-row vertical-align">
                                <div class="col-xs-5">
                                    <b>Clipping:</b> 
                                </div>
                                <div class="col-xs-7">
                                    <input type="checkbox" name="clip_enable" data-size="small":">
                                </div>
                            </div>
                            <div class="row sidebar-row vertical-align row-bold">
                                <div class="col-xs-3 text-left" id="clip_min">&nbsp;</div>
                                <div class="col-xs-6 text-center">Range</div>
                                <div class="col-xs-3 text-right" id="clip_max">&nbsp;</div>
                            </div>
                            <div class="row sidebar-row sidebar-row-full">
                                <div class="col-xs12 range-col">
                                    <input id="clip_range"
                                        type="text" value="" data-slider-id="clip-range" 
                                        data-slider-min="0" data-slider-max="100" 
                                        data-slider-step="1" data-slider-value="[0,100]"
                                    />
                                </div>
                            </div>
                            <div class="row sidebar-row vertical-align">
                                <div class="col-xs-5">
                                    <b>Auto&#8209;sizing:</b> 
                                </div>
                                <div class="col-xs-7">
                                    <input type="checkbox" name="autosize_enable" data-size="small":">
                                </div>
                            </div>
                            <div class="row sidebar-row vertical-align row-bold">
                                <div class="col-xs-3 text-left" id="clip_min">0%</div>
                                <div class="col-xs-6 text-center">Size</div>
                                <div class="col-xs-3 text-right" id="clip_max">100%</div>
                            </div>
                            <div class="row sidebar-row sidebar-row-full">
                                <div class="col-xs12 range-col">
                                    <input id="size_range"
                                        type="text" value="" data-slider-id="size-range" 
                                        data-slider-min="0" data-slider-max="100" 
                                        data-slider-step="1" data-slider-value="100"
                                    />
                                </div>
                            </div>
                        </div> <!-- container-fluid --> 
                    </div> <!-- well sidebar-nav-fixed -->
                </div> <!-- span3 -->

                <div class="span9 span-fixed-sidebar">
                    <div id="liveview_container" class="odin-server live-image">
                        <img id='liveview_image' src='/api/0.1/live_view/image' data-src='/api/0.1/live_view/image'>
                    </div> <!-- odin-server -->
                </div> <!-- span9 -->

            </div> <!-- row fluid-row -->
        </div> <!-- container-fluid-->

    <!-- Pinched from live_view example.. -->
    <script src="js/bootstrap-3.3.6-dist/dist/js/bootstrap-switch.min.js"></script>
    <script src="js/bootstrap-slider-10.2.1/js/bootstrap-slider.min.js"></script>
    <script src='js/live_view.js'></script>
    
  </body>
</html>
